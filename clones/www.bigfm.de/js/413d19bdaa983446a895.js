(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1028:function(e,t,r){var n=r(980),o=r(981),l=function(){"use strict";function e(t){var r,o;n(this,e),this.rawSchema=null!==(r=t.schema)&&void 0!==r?r:{},this.rawUi=null!==(o=t.ui_schema)&&void 0!==o?o:{}}return o(e,[{key:"sanitizeUi",value:function(e){if(e.hasOwnProperty("properties"))for(var t in e.properties)e.properties[t]=this.sanitizeUi(e.properties[t]);return e.hasOwnProperty("type")&&"array"===e.type&&e.hasOwnProperty("items")&&(e.items=this.sanitizeUi(e.items)),e.hasOwnProperty("ui:order")&&delete Object.assign(e,{order:e["ui:order"]})["ui:order"],e.hasOwnProperty("type")&&delete Object.assign(e,{kind:e.type}).type,e}},{key:"schema",get:function(){return this.rawSchema}},{key:"ui",get:function(){return this.sanitizeUi(this.rawUi)}}]),e}();e.exports=l},1029:function(e,t,r){r(53),r(48),r(52),r(21),r(27),r(28),r(6),r(5),r(3),r(2),r(4),r(36);var n=r(1030);r(19);var o=r(1031),l=r(1032),c=r(980),f=r(981);function d(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e))){var i=0,t=function(){};return{s:t,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n,o=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,n=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw n}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){n(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var y=function(){"use strict";function e(){var t,r,n,o,f,d;(c(this,e),this._profileData={},this._sessionData=null,this._queryData={},this._sid=null,this._loggedIn=!1,this.allowedUpdateKeys=["gender","first_name","last_name","birthday","phone","address","city","country","zip","tasks","newsletter_opt_in"],this.allowedRegisterKeys=["email"].concat(l(this.allowedUpdateKeys),["token","adid","channelid","promotion_code"]),this.mapping={profile:{id:"userid"},session:{fname:"first_name",lname:"last_name",bday:"birthday",street:"address"},query:{userid:"userid",gender:"gender",first_name:"first_name",last_name:"last_name",birthday:"birthday",email:"email",phone:"phone",address:"address",city:"city",country:"country",zip:"zip",token:"token",adid:"adid",channelid:"channelid",promotion_code:"promotion_code",source:"source"}},this.loadProfileData(),"undefined"!=typeof window)&&((null===(t=window.$nuxt)||void 0===t||null===(r=t.$route)||void 0===r||null===(n=r.query)||void 0===n?void 0:n.sid)&&(this._sid=window.$nuxt.$route.query.sid,this.fetchSessionData()),this._queryData=this.mapData(null!==(o=null===(f=window.$nuxt)||void 0===f||null===(d=f.$route)||void 0===d?void 0:d.query)&&void 0!==o?o:{},this.mapping.query,!0))}var t,r;return f(e,[{key:"loadProfileData",value:function(){var e,t;if("undefined"!=typeof window&&"glitterApp"in window&&window.localStorage)if(null===(e=window)||void 0===e||null===(t=e.glitterApp)||void 0===t?void 0:t.loginState){var r,n,o;this._loggedIn=!0;var l=JSON.parse(window.localStorage.getItem("glitter.user_profile")||"{}");this._profileData=this.mapData(null!==(r=l.profile)&&void 0!==r?r:{},this.mapping.profile),this._profileData.newsletter_opt_in=!!(null==l||null===(n=l.profile)||void 0===n||null===(o=n.tasks)||void 0===o?void 0:o.newsletter_opt_in)}else this._loggedIn=!1,this._profileData={}}},{key:"getProfileData",value:function(){return this.isLoggedIn()?this._profileData:null}},{key:"userData",value:(r=o(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._sessionData){e.next=4;break}return e.next=3,this.fetchSessionData();case 3:this._sessionData=e.sent;case 4:return(data=m({},this._profileData,{},this._sessionData,{},this._queryData)).profile_registered=!!(null==data?void 0:data.userid),data.birthday=this.parseDate(null==data?void 0:data.birthday),e.abrupt("return",data);case 8:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"parseDate",value:function(e){if(e&&""!==e)try{var t=e.split("."),r=3===t.length?t.reverse().join("-"):e;return new Date(r+" UTC").toISOString().substring(0,10)}catch(e){}return null!=e?e:""}},{key:"mapData",value:function(data,map){for(var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=0,r=Object.keys(data);t<r.length;t++){var n=r[t];""!==data[n]&&null!==data[n]?!e||map.hasOwnProperty(n)?map.hasOwnProperty(n)&&n!==map[n]&&(data[map[n]]=data[n],delete data[n]):delete data[n]:delete data[n]}return data}},{key:"fetchSessionData",value:(t=o(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._sid||null!==this._sessionData){e.next=16;break}return e.prev=1,e.next=4,window.$nuxt.$axios.post("/sessionstorage/",{sessionid:this._sid});case 4:return t=e.sent,data=t.data,this._sessionData=this.mapData(data,this.mapping.session),e.abrupt("return",this._sessionData);case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",{});case 14:e.next=21;break;case 16:if(!this._sid||null===this._sessionData){e.next=20;break}return e.abrupt("return",this._sessionData);case 20:return e.abrupt("return",{});case 21:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(){return t.apply(this,arguments)})},{key:"getFormUserData",value:function(e){var t,r={},n=d(this.allowedRegisterKeys);try{for(n.s();!(t=n.n()).done;){var o=t.value,l=e.get(o);"newsletter_opt_in"===o&&"on"===l?r.tasks={newsletter_opt_in:!0}:l&&(r[o]=l)}}catch(e){n.e(e)}finally{n.f()}return r}},{key:"getUpdateUserData",value:function(e){var t=this.getFormUserData(e),r=this.getProfileData();if(r&&(t.hasOwnProperty("tasks")&&r.hasOwnProperty("tasks")&&(t.tasks=m({},r.tasks,{},t.tasks)),t)){for(var n=m({},r,{},t),o=0,l=Object.keys(n);o<l.length;o++){var c=l[o];this.allowedUpdateKeys.indexOf(c)<0&&delete n[c]}return n}return null}},{key:"isLoggedIn",value:function(){return this._loggedIn}},{key:"hasSubscribedNewsletter",value:function(){var e;return!!this._loggedIn&&(null!==(e=this._profileData.newsletter_opt_in)&&void 0!==e&&e)}}]),e}();e.exports=y},964:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));r(3),r(53),r(5),r(21),r(48),r(52),r(386),r(35),r(27),r(28),r(2),r(19);var n=r(15),o=r(207),l=r(210);function c(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e))){var i=0,t=function(){};return{s:t,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n,o=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,n=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw n}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var d=function(){function e(){var t=this;if(Object(o.a)(this,e),this.getKey=Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(Math.random()*Math.pow(100,30)).toString(36),e.next=3,t.encodeKey(r,r);case 3:return n=e.sent,e.abrupt("return",n.substring(0,9));case 5:case"end":return e.stop()}}),e)}))),e._instance)return e._instance;e._instance=this,this.lib="undefined"!=typeof window?window[["c","r","y","p","t","o"].join("")]:null,this.enabled=!1,this.lib&&(this.action={dd:"down",uu:"up",ss:"start",ee:"end",vv:"move"},this.incidents=["msvv","msdd","msuu","tcvv","tcss","tcee","kydd"],this.sources={ms:"mouse",tc:"touch",ky:"key"},this.t=Date.now(),this.actions={open:this.t,first:null,last:0,evNum:{},evTot:0,usage:null},this.init())}var t,r;return Object(l.a)(e,[{key:"destroy",value:function(){var t=this;if(this.enabled){var r,n=c(this.incidents);try{for(n.s();!(r=n.n()).done;){var o=r.value,l=this.getEvtName(o);document.body.removeEventListener(l,(function(e){t.interact(e)}))}}catch(e){n.e(e)}finally{n.f()}}e._instance=null}},{key:"init",value:function(){var e,t=this,r=c(this.incidents);try{for(r.s();!(e=r.n()).done;){var n=e.value,o=this.getEvtName(n);document.body.addEventListener(o,(function(e){t.interact(e)}))}}catch(e){r.e(e)}finally{r.f()}this.enabled=!0}},{key:"setUsage",value:function(e){this.actions.usage=e}},{key:"getEvtName",value:function(e){var t=e.slice(0,2),r=e.slice(2);return e.replace(t,this.sources[t]).replace(r,this.action[r])}},{key:"interact",value:function(e){if(e.isTrusted){var t=Date.now();null===this.actions.first&&(this.actions.first=t-this.t),this.actions.evNum.hasOwnProperty(e.type)||(this.actions.evNum[e.type]=0),this.actions.evNum[e.type]++,this.actions.evTot++,this.actions.last=t-this.t}}},{key:"createKey",value:function(){return this.enabled?this.encode(JSON.stringify(this.actions)):new Promise((function(e){e("FU0zVuZRzjb1ognjwW3PB2bRp52q4Fl+GBo7lX8LK4FTgUZM5YpqPU/zFLwzmmJvecJHpk+d7D8/lmdVBs9IxXcr72pGRDji/FKZXezD3dxWDeSH7c2p0zbB1jrObB1FE7VbiMkXz")}))}},{key:"encode",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getKey();case 2:return r=e.sent,e.next=5,this.encodeKey(t,r);case 5:return n=e.sent,e.abrupt("return",[n.slice(0,8),r,n.slice(8)].join(""));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"encodeKey",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,o,l,c,f,d,h,v,m,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new TextEncoder).encode(r),e.next=3,this.lib.subtle.digest("SHA-256",n);case 3:return o=e.sent,l=this.lib.getRandomValues(new Uint8Array(12)),c=Array.from(l).map((function(b){return String.fromCharCode(b)})).join(""),f={name:"AES-GCM",iv:l},e.next=9,this.lib.subtle.importKey("raw",o,f,!1,["encrypt"]);case 9:return d=e.sent,h=(new TextEncoder).encode(t),e.next=13,this.lib.subtle.encrypt(f,d,h);case 13:return v=e.sent,m=Array.from(new Uint8Array(v)),y=m.map((function(e){return String.fromCharCode(e)})).join(""),e.abrupt("return",btoa(c+y));case 17:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),e}()},983:function(e,t,r){"use strict";r(53),r(27),r(28),r(6),r(5),r(21);var n=r(26),o=(r(204),r(47)),l=(r(35),r(36),r(79)),c=(r(4),r(48),r(52),r(57),r(0)),f=(r(3),r(345),r(19),r(15)),d=(r(2),r(970)),h=(r(390),r(207)),v=r(1037),m=r(994),y=r(1038),w=r(971),O=r.n(w);function k(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e))){var i=0,t=function(){};return{s:t,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n,o=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,n=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw n}}}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function S(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?S(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):S(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var P=function(e){return new O.a({allErrors:!0}).addFormat("data-url",".*").addFormat("tel",/^\+?[0-9\-/ ]{3,23}$/).compile(e)},x=function(e,t,data){var r,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"input",l=data.props;return e(t,{key:l.field.key,attrs:l.field.descriptor.attrs,on:(r={},Object(c.a)(r,o,(function(e){var t=e.target;l.field.setValue(t.value)})),Object(c.a)(r,"focusout",(function(e){var t,r=null==l||null===(t=l.field)||void 0===t?void 0:t.name,n={type:"object",properties:{},required:[]},o={};if("string"==typeof r&&r){var c,f;n.properties[r]=_({},l.field.schema),(null===(c=e.target)||void 0===c?void 0:c.value)&&(o[r]=e.target.value),!0===l.field.required&&n.required.push(r);var d=P(n);if("file"!==(null==l||null===(f=l.field)||void 0===f?void 0:f.kind)&&!d(o)){var h,v,m,y,w,O=null!==(h=null===(v=l.field)||void 0===v||null===(m=v.descriptor)||void 0===m||null===(y=m.definition)||void 0===y?void 0:y["webform:validationErrorMessages"])&&void 0!==h?h:{},j=k(d.errors);try{for(j.s();!(w=j.n()).done;){var S,x,D,F,E,A=w.value,M=null!==(S=null==O?void 0:O[A.keyword])&&void 0!==S?S:null==A?void 0:A.message,T=(null===(x=l.field)||void 0===x?void 0:x.key)?(null===(D=l.field)||void 0===D?void 0:D.key)+"-message":null;if(T)(null==l||null===(F=l.field)||void 0===F||null===(E=F.descriptor)||void 0===E?void 0:E.attrs)&&(l.field.descriptor.attrs["aria-errormessage"]=T,l.field.descriptor.attrs.value=e.target.value),e.target.setAttribute("aria-errormessage",T);l.field.addMessage(M,3)}}catch(e){j.e(e)}finally{j.f()}}}})),Object(c.a)(r,"focus",(function(e){var t=e.target.closest("div[data-fs-kind]");if(t&&(!t.dataset.fsKind||"file"!==t.dataset.fsKind)){e.target.removeAttribute("aria-errormessage");var r=t.querySelector('div[data-fs-message="3"]');r&&r.remove()}})),r)},n)},D=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.messages.forEach((function(o){var text=o.text,l=o.type,c=void 0===l?3:l,f=e(t.descriptor.components.get("message"),{props:{text:text,type:c},attrs:{id:(null==t?void 0:t.key)?t.key+"-message":null}},text);n?r.unshift(f):r.push(f)}))},F={name:"FieldElement",functional:!0,render:function(e,t){var r,n,data=t.data,o=t.props,l=t.children,c=o.field,f=o.field.descriptor;if("hidden"===c.kind||"hidden"===f.definition.kind)return l;var d=f.attrs.type||c.kind,h={"data-fs-kind":c.kind,"data-fs-type":d,"data-fs-field":c.name,"data-fs-required":c.required,"data-fs-horizontal":f.props.horizontal},v=_({},f.labelAttrs),m=null!==(r=null==f||null===(n=f.definition)||void 0===n?void 0:n.webform_type)&&void 0!==r?r:"";["checkboxes","radios"].indexOf(m)>=0&&delete v.for;var y=["array","enum"].indexOf(d)>=0;y&&delete v.for;var w=f.label?e(y?"legend":"label",{attrs:v,domProps:{innerHTML:f.label}}):null,O=[e("div",{attrs:{"data-fs-input":d},props:{field:c}},l)],k=e(f.components.get("helper"),data);k.tag&&O.push(k),D(e,c,O);var j=1===O.length?O:e("div",{attrs:{"data-fs-wrapper":O.length}},O);return e(y?"fieldset":"div",{attrs:h},[w,j])}},E={isObject:function(e){return E.isGenericObject(e)&&!Array.isArray(e)},isGenericObject:function(e){return null!==e&&"object"===Object(o.a)(e)},equal:function(e,t){if(e===t)return!0;if("object"===Object(o.a)(e)&&null!=e&&"object"===Object(o.a)(t)&&null!==t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e){if(!t.hasOwnProperty(r))return!1;if(!E.equal(e[r],t[r]))return!1}return!0}return!1},assign:function(e,t){return Object.keys(t).forEach((function(r){var n=t[r];E.isObject(n)&&"function"!=typeof n?n instanceof Array?e[r]=Object(l.a)(n):(e[r]||(e[r]={}),E.assign(e[r],n)):e[r]=n})),e},clone:function(e){if(E.isObject(e)){var object=e instanceof Array?[]:{};return E.assign(object,e)}return e},isEmpty:function(object){for(var e in object)return!1;return!0},clear:function(object){for(var e in object)delete object[e]}};function A(e,t,r){return r.filter((function(e){return e.descriptor.visible})).map((function(t){return e(t.descriptor.component,{key:t.key,attrs:t.descriptor.attrs,props:{field:t}})}))}var M=function(e,t){return t.descriptor.childrenGroups instanceof Array?t.descriptor.childrenGroups.map((function(t){var r=t.children;return A(e,0,r)})).flat():A(e,0,t.children)},T=function(e,t){return t.descriptor.childrenGroups.map((function(t){var r=t.id,label=t.label,n=t.children,o=A(e,0,n),l=[e("div",{attrs:{"data-fs-group-nodes":o.length}},o)];return label&&l.unshift(e("div",{attrs:{"data-fs-group-label":r}},label)),e("div",{attrs:{"data-fs-group":r}},l)}))};function C(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var I={name:"FieldsetElement",functional:!0,render:function(e,t){var data=t.data,r=t.props,n=t.slots,o=r.field,l=r.field.descriptor,f="object"!==l.kind||E.isEmpty(l.groups)?n().default||M(e,o):T(e,o);if("hidden"===l.definition.kind)return f;if(!o.isRoot)return e(l.definition.layout||F,data,f);var d=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},l.attrs,{},data.attrs||{}),h=e(l.components.get("helper"),data);if(h.tag&&f.unshift(h),l.label&&"fieldset"===l.layout){var legend=e("legend",{attrs:l.labelAttrs},l.label);f.unshift(legend)}return D(e,o,f,o.isRoot),e(l.layout,{props:r,attrs:d},f)}};function U(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function $(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?U(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):U(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var N={name:"ArrayElement",functional:!0,render:function(e,t){var r,data=t.data,n=t.props,o=n.field.descriptor.components.get("button"),l=n.field.children.map((function(t){var r=t.descriptor,l=[],c={key:t.key,attrs:r.attrs,props:{field:t}};if(!n.field.uniqueItems&&n.field.sortable&&r.buttons.length&&(0===n.field.schema.minItems||n.field.value.length>1)){var f=r.buttons.map((function(button){return e(button.component||o,{props:{button:button,field:t}})}));l.push(e("div",{key:n.field.key+t.key,attrs:{"data-fs-buttons":f.length}},f))}if("object"===r.kind){var d=e(I,c),h={props:{field:$({},t,{helper:{}})}};return e(F,h,[d,l])}return e(r.component,c,l)}));if(null===(r=n.field.descriptor.definition)||void 0===r?void 0:r.description){var c={props:{},attrs:{"data-fs-type":"description","data-fs-helper":"true"},domProps:{innerHTML:n.field.descriptor.definition.description}},f=e("div",c);l.push(f)}return e(I,data,l)}};function z(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function R(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?z(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):z(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var L={name:"HelperElement",functional:!0,render:function(e,t){var r=t.props,n=r.field,o=r.field.descriptor;return o.helper?e(n.isRoot?"p":"span",{attrs:R({},o.helperAttrs,{"data-fs-helper":!0}),domProps:{innerHTML:o.helper}}):null}},K={name:"InputElement",functional:!0,render:function(e,t){var r,n,o,c,f,d,h,v,m,y,w,data=t.data,O=t.children;("tel"===(null==data||null===(r=data.props)||void 0===r||null===(n=r.field)||void 0===n||null===(o=n.schema)||void 0===o?void 0:o.format)&&(data.attrs.type="tel"),null==data||null===(c=data.props)||void 0===c||null===(f=c.field)||void 0===f||null===(d=f.descriptor)||void 0===d||null===(h=d.definition)||void 0===h?void 0:h.prepopulate)&&(data.attrs["data-prepopulate"]=null==data||null===(v=data.props)||void 0===v||null===(m=v.field)||void 0===m||null===(y=m.descriptor)||void 0===y||null===(w=y.definition)||void 0===w?void 0:w.prepopulate);return e(F,data,[x(e,"input",data)].concat(Object(l.a)(O||[])))}},B={name:"ListElement",functional:!0,render:function(e,t){var r,n,o,l,data=t.data,c=t.props.field.descriptor,f=c.options.map((function(t){var label=t.label,r=t.value,n=t.selected;return e("option",{attrs:{value:r,selected:n}},label)}));(null==c||null===(r=c.definition)||void 0===r||null===(n=r.props)||void 0===n?void 0:n.prepopulate)&&(data.attrs["data-prepopulate"]=null==c||null===(o=c.definition)||void 0===o||null===(l=o.props)||void 0===l?void 0:l.prepopulate);var d=[e("path",{attrs:{class:"svg-handle",fill:"currentColor",d:"M12 1L9 6h6zm0 12L9 8h6z"}})];return e(F,data,[e("svg",{attrs:{width:24,height:16,viewBox:"0 0 16 16",style:"position:absolute;right:0"}},d),x(e,"select",data,f,"change")])}},V={name:"StateElement",functional:!0,render:function(e,t){var r,n,o,data=t.data,c=t.props.field,f=t.children,d=void 0===f?[]:f,h=[];"radio"===(null==data||null===(r=data.attrs)||void 0===r?void 0:r.type)&&(c.descriptor.attrs.required=null!==(o=c.parent.required)&&void 0!==o&&o,h.push(e("svg",{attrs:{width:24,height:24,viewBox:"0 0 16 16"}},[e("circle",{attrs:{class:"svg-checkbox-bg",r:"8",cx:"8",cy:"8"}}),e("circle",{attrs:{class:"svg-checkbox-check",fill:"currentColor",r:"5",cx:"8",cy:"8"}})])));return(null==data||null===(n=data.attrs)||void 0===n?void 0:n.type)&&["boolean","checkbox"].indexOf(data.attrs.type)>=0&&h.push(e("svg",{attrs:{width:24,height:24,viewBox:"0 0 16 16"}},[e("rect",{attrs:{class:"svg-checkbox-bg",width:"16",height:"16"}}),e("polygon",{attrs:{class:"svg-checkbox-check",fill:"currentColor",points:"12 1 5 7.5 2 5 1 5.5 5 10 13 1.5",transform:"translate(1 2)"}})])),h.push(e("input",{key:c.key,attrs:c.descriptor.attrs,on:{change:function(e){var t=e.target;return c.setValue(t.checked)}}})),e(F,data,[].concat(h,Object(l.a)(d)))}},G={name:"TextareaElement",functional:!0,render:function(e,t){var data=t.data,r=t.props,n=t.children;return e(F,data,[x(e,"textarea",data,r.field.value)].concat(Object(l.a)(n||[])))}},H={functional:!0,name:"MessageElement",render:function(e,t){var r=t.props;return e("div",{attrs:{"data-fs-message":r.type}},[e("span",{domProps:{innerHTML:r.text.replace(/(<([^>]+)>)/gi,"")},attrs:{"data-fs-message-text":!0,id:null==r?void 0:r.id}})])}};function J(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var X=function(e){Object(y.a)(n,e);var t,r=(t=n,function(){var e,r=Object(m.a)(t);if(J()){var n=Object(m.a)(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return Object(v.a)(this,e)});function n(){var e;return Object(h.a)(this,n),(e=r.call(this)).set("array",N),e.set("string",K),e.set("password",K),e.set("file",K),e.set("image",K),e.set("number",K),e.set("integer",K),e.set("checkbox",V),e.set("radio",V),e.set("boolean",V),e.set("list",B),e.set("helper",L),e.set("textarea",G),e.set("enum",I),e.set("object",I),e.set("message",H),e}return n}(d.a),W=r(1028),Z=r.n(W),Y=r(1029),Q=r.n(Y),ee=r(964),te={name:"form-pages-nav",emits:["form-nav"],props:{pageNavConfig:{type:Array}},methods:{navigate:function(e){"after"!==e.pointer&&this.$emit("form-nav",e.id)},liStyle:function(e){var t=(100/(this.pageNavConfig.length+1)).toFixed(2);return{maxWidth:"current"===e?2*t+"%":t+"%"}}}},re=r(14),ne=Object(re.a)(te,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{staticClass:"form-pages-nav"},[r("ol",e._l(e.pageNavConfig,(function(t){return r("li",{key:t.id,style:e.liStyle(t.pointer)},[r("a",{class:t.pointer,attrs:{href:"#"+t.id},on:{click:function(r){return r.preventDefault(),e.navigate(t)}}},[e._v(e._s(t.title))])])})),0)])}),[],!1,null,null,null).exports;function ie(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oe(e,t)}(e))){var i=0,t=function(){};return{s:t,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n,o=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,n=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw n}}}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var ae={name:"form-prev-next",emits:["form-nav"],props:{pageNavConfig:{type:Array}},methods:{navigateForm:function(e){var t,r=ie(this.pageNavConfig);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.pointer===e){this.$emit("form-nav",n.id);break}}}catch(e){r.e(e)}finally{r.f()}},isDisabled:function(e){var t,r=!0,n=ie(this.pageNavConfig);try{for(n.s();!(t=n.n()).done;){t.value.pointer===e&&(r=!1)}}catch(e){n.e(e)}finally{n.f()}return r}}},se=Object(re.a)(ae,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{staticClass:"form-prev-next"},[r("button",{attrs:{type:"button",disabled:e.isDisabled("prev")},on:{click:function(t){return t.preventDefault(),e.navigateForm("prev")}}},[e._v("« Prev")]),e._v(" "),r("button",{attrs:{type:"button",disabled:e.isDisabled("next")},on:{click:function(t){return t.preventDefault(),e.navigateForm("next")}}},[e._v("Next »")])])}),[],!1,null,null,null).exports,ue=r(86),le=r.n(ue);function ce(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(e,t)}(e))){var i=0,t=function(){};return{s:t,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n,o=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,n=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw n}}}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function de(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function pe(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?de(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):de(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var he,ve,me,ge={name:"webform-schema",components:{FormSchema:d.b,FormPagesNav:ne,FormPrevNext:se},props:{formSchema:{type:Object},describedBy:{type:String}},emits:["submitted"],data:function(){return{model:{},ajv:new O.a({allErrors:!0}).addFormat("data-url",".*").addFormat("tel",/^\+?[0-9\-\/ ]{3,23}$/),showForm:!0,showConfirmation:!1,pageNavConfig:[],pageCurrent:null,formField:null,sanitizer:null,components:new X,userData:new Q.a,keyGenerator:new ee.a}},methods:{onSubmit:function(e){var t=this,r=e.field,n=e.currentTarget;return this.validateUrlsInTextFields()&&this.validateFileUploadsMaxSize()?(this.keyGenerator.setUsage("submission"),void(this.getSetting("form_novalidate")?this.validator(r).then((function(e){e&&t.keyGenerator.createKey().then((function(e){t.executeSubmission(n,e)}))})):this.keyGenerator.createKey().then((function(e){t.executeSubmission(n,e)})))):(this.scrollToFormTop(),Promise.resolve(!1))},executeSubmission:function(form,e){var t=this,r=new FormData(form);if(this.protect&&r.has(this.protect)&&r.set(this.protect,e),this.getSetting("display_form_teaser"))return this.$emit("submitted",form),!1;var path=this.getPath();path&&(form.classList.add("await-response"),fetch(path,{method:"POST",body:r,header:{Accept:"application/json","Content-Type":"multipart/form-data"}}).then((function(e){if(e.ok)return e.json();var r="webform.submissionError.".concat(e.status),n=t.$t(r);throw new Error(n!==r?n:t.messageSubmissionError)})).then((function(data){if("OK"===(null==data?void 0:data.submission))t.trackSubmission(form),t.confirmSubmission(),t.createUserAccount(form,r),t.updateUserProfile(form,r);else if(void 0!==data.error)throw new Error(t.messageSubmissionError)})).catch((function(e){t.showErrorModal(e)})).finally((function(){form.classList.remove("await-response")})))},reParseDates:function(form,e){form.querySelectorAll("input[type=date]").forEach((function(t){var r=t.getAttribute("name"),n=e.get(r);if(n){var o=new Date(n).toLocaleDateString("de-DE");e.set(r,o)}}))},getPath:function(){return["/form/submission",this.uuid].join("/")},preValidate:(me=Object(f.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.formField=t;case 1:case"end":return e.stop()}}),e,this)}))),function(e){return me.apply(this,arguments)}),validator:(ve=Object(f.a)(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.clearMessages(!0),!this.pageNavConfig.length){e.next=8;break}if(this.isLastPage()){e.next=7;break}return t.addMessage("Please continue to last page to submit form.",3),e.abrupt("return",Promise.resolve(!1));case 7:return e.abrupt("return",this.validatePage(this.pageCurrent));case 8:if(this.validate(t.value)){e.next=12;break}return this.validate.errors.forEach((function(e,n){var o=e.dataPath,l=e.params,c=Object.values(l).at(0);o=void 0!==c?o+"."+c:o;var f=pe({},t);f=t.hasChildren&&f.getField(o)||f;var d=r.getErrorMessage(e,f,n);t.addMessage(d,3)})),this.scrollToFormTop(),e.abrupt("return",Promise.resolve(!1));case 12:return e.abrupt("return",Promise.resolve(!0));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return ve.apply(this,arguments)}),validatePage:(he=Object(f.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.formField){e.next=4;break}return e.abrupt("return",Promise.resolve(!1));case 4:if(this.validateUrlsInTextFields(t)){e.next=7;break}return this.scrollToFormTop(),e.abrupt("return",Promise.resolve(!1));case 7:if(this.validateFileUploadsMaxSize(t)){e.next=10;break}return this.scrollToFormTop(),e.abrupt("return",Promise.resolve(!1));case 10:if(!this.getSetting("form_novalidate")){e.next=14;break}return e.abrupt("return",this.validatePageAjv(t));case 14:return e.abrupt("return",this.validatePageHtml5(t));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return he.apply(this,arguments)}),validateUrlsInTextFields:function(e){var t,r=this;null===(t=this.formField)||void 0===t||t.clearMessages(!0);var n=!0,o=this.$refs.formSchema.form();return"string"==typeof e&&(o=o.querySelector("section[name="+e+"]")),o.querySelectorAll("input[type=text], textarea").forEach((function(e){var t=e.getAttribute("name"),o=r.getFieldDescriptor(t);if(o&&o.hasOwnProperty("ui:options")&&o["ui:options"].hasOwnProperty("allow_urls")&&"0"===o["ui:options"].allow_urls){var l=e.value.match(/((href=["'´`])|(mailto:)|([a-z]{0,9}:?\/\/)|([\u00C0-\u00FF\w-]+\.)+([a-z]{2,10}))/gi);if(l){var c,f,d=null!==(f=(null!==(c=o["webform:validationErrorMessages"])&&void 0!==c?c:{}).allow_urls)&&void 0!==f?f:r.$t("webform.errorUrlNotAllowed");r.formField.addMessage(d+' "'+l.join(", ")+'"',3),n=!1}}})),n},validateFileUploadsMaxSize:function(e){var t,r=this;null===(t=this.formField)||void 0===t||t.clearMessages(!0);var n=!0,o=0,l=this.$refs.formSchema.form();if("string"==typeof e&&(l=l.querySelector("section[name="+e+"]")),l.querySelectorAll("input[type=file]").forEach((function(e){var t=e.getAttribute("name"),l=r.getFieldDescriptor(t);if(l&&l.hasOwnProperty("ui:options")&&l["ui:options"].hasOwnProperty("max_file_size")&&"number"==typeof l["ui:options"].max_file_size&&l["ui:options"].max_file_size>0){var c=l["ui:options"].max_file_size,f=r.readableFileSize(c);Array.from(e.files).forEach((function(e){if(o+=e.size,e.size>c){var t,d,h=null!==(d=(null!==(t=l["webform:validationErrorMessages"])&&void 0!==t?t:{}).max_file_size)&&void 0!==d?d:r.$t("webform.errorFileMaxSize");r.formField.addMessage(h+" "+f,3),n=!1}}))}})),o>104857600){var c=this.readableFileSize(104857600);this.formField.addMessage(this.$t("webform.errorOverallFileMaxSize")+" "+c,3),n=!1}return n},validatePageAjv:function(e){var t=this;this.formField.clearMessages(!0);var r=this.getPageFieldsValues(e),n=this.ajv.compile(this.schema.properties[e]);return n(r)?Promise.resolve(!0):(n.errors.forEach((function(r,n){var o=r.dataPath,l=r.params,c=Object.values(l).at(0);o=o.length?"."+e+o:"."+e,o=void 0!==c?o+"."+c:o;var f=pe({},t.formField);f=f.hasChildren&&f.getField(o)||f;var d=t.getErrorMessage(r,f,n);t.formField.addMessage(d,3)})),this.scrollToFormTop(),Promise.resolve(!1))},getErrorMessage:function(e,t){var r,n=e.message,o=e.keyword,l=null===(r=t.descriptor)||void 0===r?void 0:r.definition;if(void 0!==l){var c,f,d=null!==(f=(null!==(c=l["webform:validationErrorMessages"])&&void 0!==c?c:{})[o])&&void 0!==f?f:null;if("string"==typeof d&&""!==d)return d}return n},validatePageHtml5:function(e){var form=this.$refs.formSchema.form(),t=form.querySelector("section[name="+e+"]"),r=!0;return Array.from(form.elements).every((function(input){if(t.contains(input)){if("radio"===input.type){var e=input.getAttribute("name");form.querySelector('[data-fs-field="'+e+'"][data-fs-required="true"]')&&(input.required=!0)}if(!input.checkValidity())return input.reportValidity(),r=!1,!1}return!0})),Promise.resolve(r)},getSetting:function(param){return this.settings.hasOwnProperty(param)?this.settings[param]:null},confirmSubmission:function(){var e=this.getSetting("confirmation_type"),t=this.getSetting("confirmation_url");return this.model={},-1!==["page","url","url_message"].indexOf(e)&&(t?this.isExternalLink(t)?window.location.href=t:this.$router.push({path:t}):e="message"),-1!==["modal","url_message"].indexOf(e)?this.showModal(this.confirmTitle,this.confirmMessage):"inline"===e?(this.showForm=!1,this.showConfirmation=!0,this.scrollToFormTop()):"message"===e&&(this.showForm=!0,this.showConfirmation=!0,this.scrollToFormTop()),!0},showErrorModal:function(e){this.showModal(this.$t("webform.errorTitle"),e)},showModal:function(title,text){UIkit.modal.dialog('\n          <div class="uk-modal-header">\n            <h3 class="uk-modal-title">'.concat(title,'</h3>\n          </div>\n          <div class="uk-modal-body">').concat(text,'</div>\n          <button class="uk-modal-close-default" type="button" uk-close title="').concat(this.$t("modal.close"),'"></button>\n        '))},navigateForm:function(e){var t=this;this.mustValidatePage(e)?this.validatePage(this.pageCurrent).then((function(r){r&&t.switchFormPage(e)})):this.switchFormPage(e)},mustValidatePage:function(e){var t=!0;return this.pageNavConfig.forEach((function(r){r.id!==e||"prev"!==r.pointer&&"before"!==r.pointer||(t=!1)})),t},switchFormPage:function(e){this.formField&&this.formField.clearMessages(!0);var form=this.$refs.formSchema.form();if(form){var t,r=ce(form.getElementsByTagName("SECTION"));try{for(r.s();!(t=r.n()).done;){var n=t.value;n.getAttribute("name")===e?n.classList.remove("visually-hidden"):n.classList.add("visually-hidden")}}catch(e){r.e(e)}finally{r.f()}this.pageCurrent=e,this.updatePageNavConfig(),this.scrollToFormTop()}},getPageFieldsValues:function(e){for(var t=this.formField.value[e],r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];"string"==typeof t[o]&&""===t[o]&&(t[o]=void 0)}return t},createPageNavConfig:function(){this.pageNavConfig=this.formPagesItems.map((function(e,t){return pe({},e,{pointer:0===t?"current":1===t?"next":"after"})}))},updatePageNavConfig:function(){var e=this.pageNavConfig.map((function(e){return e.id})).indexOf(this.pageCurrent);for(var t in this.pageNavConfig){var i=parseInt(t,10);this.pageNavConfig[i].pointer=i<e-1?"before":i===e-1?"prev":i===e?"current":i===e+1?"next":"after"}},isLastPage:function(){return"current"===Object(l.a)(this.pageNavConfig).pop().pointer},scrollToFormTop:function(){var form=this.$refs.formSchema.form();setTimeout((function(){var e=form.getBoundingClientRect().top+window.scrollY-220;window.scrollTo({top:e,behavior:"smooth"})}),200)},resolvePaths:function(e){return e.replace("]","").split("[").join(".properties.")},getFieldDescriptor:function(e){var t="descriptor["+e;t=this.resolvePaths(t);try{return t.split(".").reduce((function(e,i){return e[i]}),this)}catch(e){return console.error("Invalid descriptor path.",e.getErrorMessage()),null}},readableFileSize:function(e){var i=0===e?0:Math.floor(Math.log(e)/Math.log(1024));return 1*+(e/Math.pow(1024,i)).toFixed(2)+" "+["B","kB","MB","GB","TB"][i]},formTeaserReplacement:function(){var e;if(!this.getSetting("display_form_teaser")&&"undefined"!=typeof window&&(null===(e=window)||void 0===e?void 0:e.sessionStorage)){var t=window.sessionStorage.getItem("form_teaser_data");if(t){var data=JSON.parse(t);if(data&&"object"===Object(o.a)(data)&&(null==data?void 0:data.formId)&&data.formId===this.uuid)for(var form=this.$refs.formSchema.form(),r=0,l=Object.entries(data);r<l.length;r++){var c=Object(n.a)(l[r],2),f=c[0],d=c[1];if("formId"!==f){var input=form.elements[f];"checkbox"===input.type?input.checked=!!d:input.value=d}}window.sessionStorage.removeItem("form_teaser_data")}}},doTokenReplacement:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){var form,r,n,o,l,c,f,d,text,h,v,m,y,w,O,k,j,S,_,P,x,D,F,E,A;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(form=e.$refs.formSchema.form(),!(r=form.querySelectorAll("[data-prepopulate]")).length){t.next=33;break}return t.next=5,e.userData.userData();case 5:n=t.sent,o=Object.keys(n),l=ce(r),t.prev=8,l.s();case 10:if((c=l.n()).done){t.next=25;break}if("checkbox"!==(f=c.value).getAttribute("type")){t.next=17;break}return d=(d=f.dataset.prepopulate).substring(d.indexOf("<")+1,d.indexOf(">")),n.hasOwnProperty(d)&&(f.checked=!!n[d],f.dispatchEvent(new Event("input"))),t.abrupt("continue",23);case 17:text=f.dataset.prepopulate,h=text,v=ce(o);try{for(v.s();!(m=v.n()).done;)y=m.value,h=h.replace("<".concat(y,">"),n[y])}catch(e){v.e(e)}finally{v.f()}e.userData.isLoggedIn()||"hidden"===f.getAttribute("type")&&(null===(w=f.dataset)||void 0===w?void 0:w.prepopulate)&&["<adid>","<channelid>","<userid>"].indexOf(f.dataset.prepopulate)>=0&&(f.value=f.dataset.prepopulate),text!==h&&(f.value=h,O="INPUT"===f.nodeName?"input":"change",f.dispatchEvent(new Event(O)));case 23:t.next=10;break;case 25:t.next=30;break;case 27:t.prev=27,t.t0=t.catch(8),l.e(t.t0);case 30:return t.prev=30,l.f(),t.finish(30);case 33:k=function(e,t){t?(e.checked=!1,e.setAttribute("aria-hidden","true")):e.removeAttribute("aria-hidden")},j=ce(form.querySelectorAll('input[type="checkbox"][data-task="profile_register"]'));try{for(j.s();!(S=j.n()).done;)_=S.value,k(_,e.userData.isLoggedIn())}catch(e){j.e(e)}finally{j.f()}P=ce(form.querySelectorAll('input[type="checkbox"][data-task="profile_update"]'));try{for(P.s();!(x=P.n()).done;)D=x.value,k(D,!e.userData.isLoggedIn())}catch(e){P.e(e)}finally{P.f()}F=ce(form.querySelectorAll('input[type="checkbox"][data-task="newsletter_opt_in"]'));try{for(F.s();!(E=F.n()).done;)A=E.value,k(A,e.userData.hasSubscribedNewsletter())}catch(e){F.e(e)}finally{F.f()}case 40:case"end":return t.stop()}}),t,null,[[8,27,30,33]])})))()},doSegmentsInclude:function(){if("ope"in window){var e=this.$refs.formSchema.form().querySelectorAll('input[type="hidden"][name="segments"]');if(e.length)try{ope("crossplan","onProfile",(function(t,r){if(!t){var n=r.s.join(",");e.forEach((function(input){input.value=n}))}}))}catch(e){console.error(e.message)}}},createUserAccount:function(form,e){if("glitterApp"in window&&!glitterApp.loginState){var t=form.querySelector('[type="checkbox"][data-task="profile_register"]');if(t&&t.checked)try{var r,n=this.userData.getFormUserData(e);if(n)glitterApp.showView("create-account"),window.postMessage(n,document.location.origin),UIkit.modal("#loginModal").show();else this.formField.addMessage(null!==(r=this.$t("webform.errorOnRegisterUser"))&&void 0!==r?r:"Error on register user.",3)}catch(e){var o;throw console.error(e),new Error(null!==(o=this.$t("webform.errorOnRegisterUser"))&&void 0!==o?o:"Error on register user.")}}},updateUserProfile:function(form,e){if("glitterApp"in window&&glitterApp.loginState){var t=null,r=form.querySelector('[type="checkbox"][data-task="profile_update"]'),n=form.querySelector('[type="checkbox"][data-task="newsletter_opt_in"]');if(r&&r.checked?t=e:n&&n.checked&&(t=new FormData).append("newsletter_opt_in","on"),t)try{var o=this.userData.getUpdateUserData(t);o&&glitterApp.profileUpdate(o)}catch(e){var l;throw console.error(e),new Error(null!==(l=this.$t("webform.errorOnUpdateUser"))&&void 0!==l?l:"Error on update user.")}}},trackSubmission:function(form){var e,t,r=null===(e=form.closest(".section-form"))||void 0===e||null===(t=e.querySelector("h2"))||void 0===t?void 0:t.textContent,n={source:"Form",event:"Submit",data:{event_category:"Form",page_title:document.title,section_title:r||"no title",submit_value:this.formId,audience:this.$store.getters.getCurrentAudience.name}};this.$EventBus.$emit("tracking",n)},isExternalLink:function(e){var t=document.createElement("a");return t.href=e,t.host!==window.location.host}},watch:{"$store.getters.getLoginStatus":function(e){this.userData.loadProfileData(),this.doTokenReplacement()}},mounted:function(){var e=this;if(this.hasFormPages&&this.formPagesItems.length){var t;this.createPageNavConfig();var r=null!==(t=this.formPagesItems[0].id)&&void 0!==t?t:null;r&&setTimeout((function(){e.switchFormPage(r)}),200)}setTimeout((function(){e.doTokenReplacement().then((function(){e.formTeaserReplacement()})),e.doSegmentsInclude()}),500)},beforeUnmount:function(){this.keyGenerator.destroy()},computed:{uuid:function(){return this.formSchema.id},formElementId:function(){var e=this.formSchema.id.substring(0,8);return"form_".concat(e)},getSchema:function(){return this.sanitizer||(this.sanitizer=new Z.a(le()(this.formSchema))),this.sanitizer},schema:function(){return this.getSchema.schema},descriptor:function(){return this.getSchema.ui},protect:function(){var e,t;return null===(e=this.formSchema)||void 0===e||null===(t=e.protect)||void 0===t?void 0:t.field_name},actions:function(){return this.formSchema.actions},validate:function(){return this.ajv.compile(this.schema)},settings:function(){var e;return null!==(e=this.formSchema.settings)&&void 0!==e?e:{}},hasFormPages:function(){return this.getSetting("wizard_enabled")},formPagesItems:function(){return this.getSetting("wizard_pages")},messageSubmissionError:function(){var e=this.getSetting("submission_exception_message");return e||this.$t("webform.errorSubmissionMsg")},confirmTitle:function(){var title=this.getSetting("confirmation_title");return title||this.$t("webform.thanks")},confirmMessage:function(){var e=this.getSetting("confirmation_message");return e||this.$t("webform.successMsg")},formId:function(){var e;return null===(e=this.formSchema)||void 0===e?void 0:e.id}}},ye=Object(re.a)(ge,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:["webform"]},[e.showConfirmation?r("div",{staticClass:"inline-confirmation uk-text-center"},[r("h3",{domProps:{innerHTML:e._s(e.confirmTitle)}}),e._v(" "),r("div",{domProps:{innerHTML:e._s(e.confirmMessage)}})]):e._e(),e._v(" "),e.hasFormPages&&e.showForm?r("FormPagesNav",{attrs:{pageNavConfig:e.pageNavConfig},on:{"form-nav":e.navigateForm}}):e._e(),e._v(" "),e.showForm?r("FormSchema",e._b({ref:"formSchema",attrs:{id:e.formElementId,validator:e.preValidate,components:e.components,"aria-describedby":e.describedBy,action:e.getPath(),novalidate:e.getSetting("form_novalidate"),method:"post"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"FormSchema",{schema:e.schema,descriptor:e.descriptor},!1),[r("div",{staticClass:"form-actions"},[e.hasFormPages?r("FormPrevNext",{attrs:{pageNavConfig:e.pageNavConfig},on:{"form-nav":e.navigateForm}}):e._e(),e._v(" "),e._l(e.actions,(function(t){return[r("button",{staticStyle:{display:"none"},attrs:{type:"submit",disabled:"","aria-hidden":"true"}},[e._v("Disabled submit")]),e._v(" "),r("button",{staticClass:"uk-button uk-button-default uk-margin-large",attrs:{type:t.type}},[e._v(e._s(t.value))])]})),e._v(" "),e.getSetting("form_reset")?r("input",{attrs:{type:"reset"},domProps:{value:e.$t("webform.reset")}}):e._e()],2)]):e._e()],1)}),[],!1,null,null,null);t.a=ye.exports}}]);